# Домашнее задание к занятию 12.8. «Резервное копирование баз данных»Князева Валерия

**Домашнее задание выполните в Google Docs или в md-файле в вашем репозитории GitHub.** 

Для оформления вашего решения в GitHub можете воспользоваться [шаблоном](https://github.com/netology-code/sys-pattern-homework).

Название файла должно содержать номер лекции и фамилию студента. Пример названия: «12.8. Резервное копирование баз данных — Александр Александров».

Перед тем как выслать ссылку, убедитесь, что её содержимое не является приватным, то есть открыто на просмотр всем, у кого есть ссылка. Если необходимо прикрепить дополнительные ссылки, просто добавьте их в свой Google Docs.

Любые вопросы по решению задач задавайте в чате учебной группы.

---

### Задание 1. Резервное копирование

### Кейс
Финансовая компания решила увеличить надёжность работы баз данных и их резервного копирования. 

Необходимо описать, какие варианты резервного копирования подходят в случаях: 

1.1. Необходимо восстанавливать данные в полном объёме за предыдущий день.

1.2. Необходимо восстанавливать данные за час до предполагаемой поломки.

1.3.* Возможен ли кейс, когда при поломке базы происходило моментальное переключение на работающую или починенную базу данных.

*Приведите ответ в свободной форме.*

1.1 Необходимо восстанавливать данные в полном объеме за предыдущий день. Дифференциальная резервная копия позволяет довольно быстро восстанавливать данные, поскольку для этого требуется всего две части резервной копии: полная резервная копия и последняя дифференциальная резервная копия. Данное резервное копирование быстрее, чем полное, но медленнее, чем инкрементное  

1.2 Необходимо восстанавливать данные за час до предполагаемой поломки. Инкрементное резервное копирование использует полную копию, как начальную точку, его можно выполнять довольно часто.

1.3 Да, при репликации master-slave.

---

### Задание 2. PostgreSQL

2.1. С помощью официальной документации приведите пример команды резервирования данных и восстановления БД (pgdump/pgrestore).

2.1.* Возможно ли автоматизировать этот процесс? Если да, то как?

*Приведите ответ в свободной форме.*

---

2.1 pg_dump -Fc bd_name > dump.sql

Восстанавливаться нужно с помощью команды pg_restore, например:

pg_restore –d bd_name dump.sql

2.2 С помощью скрипта и cron или любых других утилит, например, сервис Cloud Functions позволяет запускать функции в облаке и настраивать триггеры с расписанием, они могут связываться с БД в облаке или через тот же api gateway


---

### Задание 3. MySQL

3.1. С помощью официальной документации приведите пример команды инкрементного резервного копирования базы данных MySQL. 

3.1.* В каких случаях использование реплики будет давать преимущество по сравнению с обычным резервным копированием?

*Приведите ответ в свободной форме.*
---

3.1 --incremental-base=history:last_full_backup
3.2 Резервная копия поможет восстановить данные, при их поломке или потере, при поломке диска, при срочном возобновлениее работы, так как она позволяет всегда иметь копию в готовом к запуску состоянии.
---

Задания, помеченные звёздочкой, — дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже шире разобраться в материале.
